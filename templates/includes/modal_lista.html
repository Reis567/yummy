
<!-- Modal para criar nova lista -->
<div class="modal fade" id="modalCriarLista" tabindex="-1" aria-labelledby="modalCriarListaLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white;">
                <h5 class="modal-title" id="modalCriarListaLabel">
                    <i class="fas fa-plus-circle me-2"></i>Criar Nova Lista
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <form id="formCriarLista">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="nome" class="form-label">Nome da Lista</label>
                        <input type="text" class="form-control" id="nome" name="nome" required placeholder="Ex: Compras do Mês">
                    </div>
                    
                    <div class="mb-3">
                        <label for="objetivo" class="form-label">Objetivo (opcional)</label>
                        <textarea class="form-control" id="objetivo" name="objetivo" rows="2" placeholder="Descreva o objetivo desta lista"></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="data_objetivo" class="form-label">Data de Conclusão (opcional)</label>
                        <input type="date" class="form-control" id="data_objetivo" name="data_objetivo">
                        <div class="form-text">
                            <i class="fas fa-info-circle me-1"></i>Defina uma data limite para concluir esta lista.
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="cor" class="form-label">Cor da Lista</label>
                            <input type="color" class="form-control form-control-color w-100" id="cor" name="cor" value="#FF4500">
                        </div>
                        
                        <div class="col-md-6">
                            <label for="icone" class="form-label">Ícone da Lista</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i id="preview-icone" class="fas fa-clipboard-list"></i>
                                </span>
                                <input type="text" class="form-control" id="icone" name="icone" placeholder="fas fa-clipboard-list" value="fas fa-clipboard-list">
                            </div>
                            <div class="form-text">Use classes do Font Awesome (fas fa-*).</div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus-circle me-1"></i>Criar Lista
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal para editar lista existente -->
<div class="modal fade" id="modalEditarLista" tabindex="-1" aria-labelledby="modalEditarListaLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white;">
                <h5 class="modal-title" id="modalEditarListaLabel">
                    <i class="fas fa-edit me-2"></i>Editar Lista: <span id="editarListaNome"></span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <!-- Loading -->
            <div id="loadingEditarLista" class="d-flex justify-content-center align-items-center py-5">
                <div class="spinner-border text-primary me-2" role="status"></div>
                <span>Carregando dados da lista...</span>
            </div>
            
            <!-- Conteúdo do Modal -->
            <div id="conteudoEditarLista" style="display: none;">
                <form id="formEditarLista" data-lista-id="">
                    {% csrf_token %}
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="editar_nome" class="form-label">Nome da Lista</label>
                            <input type="text" class="form-control" id="editar_nome" name="nome" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editar_objetivo" class="form-label">Objetivo (opcional)</label>
                            <textarea class="form-control" id="editar_objetivo" name="objetivo" rows="2"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editar_data_objetivo" class="form-label">Data de Conclusão (opcional)</label>
                            <input type="date" class="form-control" id="editar_data_objetivo" name="data_objetivo">
                        </div>
                        
                        <div class="mb-3">
                            <label for="editar_status" class="form-label">Status</label>
                            <select class="form-select" id="editar_status" name="status">
                                <option value="em_andamento">Em andamento</option>
                                <option value="concluida">Concluída</option>
                                <option value="pausada">Pausada</option>
                                <option value="arquivada">Arquivada</option>
                            </select>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="editar_cor" class="form-label">Cor da Lista</label>
                                <input type="color" class="form-control form-control-color w-100" id="editar_cor" name="cor">
                            </div>
                            
                            <div class="col-md-6">
                                <label for="editar_icone" class="form-label">Ícone da Lista</label>
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i id="editar_preview_icone" class="fas fa-clipboard-list"></i>
                                    </span>
                                    <input type="text" class="form-control" id="editar_icone" name="icone">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-1"></i>Salvar Alterações
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Script de preview de ícone -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Preview de ícone para criação de lista
        const iconeInput = document.getElementById('icone');
        const previewIcone = document.getElementById('preview-icone');
        
        if (iconeInput && previewIcone) {
            iconeInput.addEventListener('input', function() {
                const iconeClasse = this.value.trim();
                if (iconeClasse) {
                    // Remover todas as classes e adicionar a nova
                    previewIcone.className = iconeClasse;
                } else {
                    // Definir ícone padrão
                    previewIcone.className = 'fas fa-clipboard-list';
                }
            });
        }
        
        // Preview de ícone para edição de lista
        const editarIconeInput = document.getElementById('editar_icone');
        const editarPreviewIcone = document.getElementById('editar_preview_icone');
        
        if (editarIconeInput && editarPreviewIcone) {
            editarIconeInput.addEventListener('input', function() {
                const iconeClasse = this.value.trim();
                if (iconeClasse) {
                    // Remover todas as classes e adicionar a nova
                    editarPreviewIcone.className = iconeClasse;
                } else {
                    // Definir ícone padrão
                    editarPreviewIcone.className = 'fas fa-clipboard-list';
                }
            });
        }
    });
</script>